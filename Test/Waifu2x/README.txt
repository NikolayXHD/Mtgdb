 waifu2x-converter (for Windows)
=================================
 作成 : アミーゴ (WhiteLuckers)

本ソフトは、画像変換ソフトウェア「waifu2x(https://github.com/nagadomi/waifu2x)」の変換機能のみを、
waifu2x.py(https://marcan.st/transf/waifu2x.py)を参考にC++言語とOpenCVを用いて書き直し、
Windows向けにビルドしたソフトです。
GitHubリポジトリは[こちら](https://github.com/WL-Amigo/waifu2x-converter-cpp)になります。


 動作環境
----------

以下の環境で動作を確認しております。

 * OS : Windows7 64bit (少なくとも、** 64bitのWindowsOS **である必要があります)
 * CPU : intel系CPU (出来る限りクロック・コア数の多いものが良いです)
 * メモリ : 6GB以上 (4GBのPCでも動きましたが、本ソフトは動作中かなりメモリを食います)
 * Visual C++ 2013 再頒布可能パッケージがインストールされていること(必須)
    - 上記パッケージは[こちら](https://www.microsoft.com/ja-jp/download/details.aspx?id=40784)
    - `ダウンロード` ボタンを押した後、`vcredist_x64.exe`を選択し、ダウンロード・インストールを行って下さい。
    - 見つからない場合は、「Visual C++ 2013 再頒布可能パッケージ」で検索してみて下さい。

上記以外の環境でも動作するかも知れませんが、動作することは保障致しません。
また、以上の環境でも動作することは保障致しません。
分からないことを含め、自己責任での使用をよろしくお願い致します。


 使い方
--------

本ソフトはコマンドラインツールです。
`コマンドプロンプト` を立ち上げ、次のようにコマンドを打ち込み、使用して下さい。


以下のコマンドは、使い方を画面に出力します。
```
waifu2x-converter.exe --help
```

以下のコマンドは、画像変換を実行するコマンドの例です。
```
waifu2x-converter.exe -i C:\Users\amigo\Pictures\mywaifu.png -m noise_scale -j 8 --scale_ratio 1.6 --noise_level 2
```
以上を実行すると、`C:\Users\amigo\Pictures\mywaifu(noise_scale)(Level2)(x1.600000).png`に変換結果が保存されます。


本ソフトでは、以下のオプションを指定することが出来ます。

   -i <文字列>,  --input_file <文字列>
     (必須)  変換する画像へのパス(フルパスでの入力をおすすめします)

   -o <string>,  --output_file <string>
     変換された画像を保存するファイルへのパス(フルパスでの入力をおすすめします)
     拡張子(最後の.pngなど)は必ず入力するようにして下さい。
     指定しなかった場合は自動でファイル名を決定し、そのファイルに保存します。
     ファイル名の決定ルールは、
     `[元の画像ファイル名]``(モード名)``(ノイズ除去レベル(ノイズ除去モードの場合))``(拡大率(拡大モードの場合))``.png`
     のようになっています。
     保存される場所は、基本的には入力画像と同じディレクトリになります。
     (入力画像へのパスを相対パスで記述した場合、予期せぬことが起こる可能性があります)

   -m <noise|scale|noise_scale>,  --mode <noise|scale|noise_scale>
     変換モードを指定します。指定しなかった場合は`noise_scale`が選択されます。
      * noise : ノイズ除去を行います (正確には、ノイズ除去用のモデルを用いて画像変換を行います)
      * scale : 拡大を行います (正確には、既存アルゴリズムで拡大した後に、拡大画像補完用のモデルを用いて画像変換を行います)
      * noise_scale : ノイズ除去と拡大を行います (ノイズ除去を行った後に、引き続き拡大処理を行います)

   -j <整数値>,  --jobs <整数値>
     プログラム内で処理を分割する数を指定します。このオプションで指定した数のスレッドがプログラム内で起動されます。
     CPUのコア数を指定することでほぼ最速での処理が行えますが、CPUを100%で使用することになりますので、
     放熱等には十分ご注意下さい。
     デフォルト値は`4`です。

   --scale_ratio <小数点付き数値>
     何倍に拡大するかを指定します。デフォルト値は`2.0`ですが、2.0倍以外も指定できます。
     2.0以外の数値を指定すると、次のような処理を行います。
      * まず、指定された倍率を必要十分にカバーするように、2倍拡大を繰り返し行います。
      * 2の累乗以外の数値がしてされている場合は、指定倍率になるように拡大した画像を線形フィルタで縮小します。

   --noise_level <1|2>
     ノイズ除去レベルを指定します。ノイズ除去用のモデルはレベル1とレベル2のみ用意されているので、
      1 もしくは 2 を指定して下さい。
     デフォルト値は`1`です。

   --model_dir <文字列>
     モデルが格納されているディレクトリへのパスを指定します。デフォルト値は`models`です。
     基本的には指定しなくても大丈夫です。独自のモデルを使用する時などに指定して下さい。

   --,  --ignore_rest
     このオプションがしてされた後の全てのオプションを無視します。
     スクリプト・バッチファイル用です。

   --version
     バージョン情報を出力し、終了します。

   -h,  --help
     使い方を表示し、終了します。
     手軽に使い方を確認したい時などにどうぞ。


 更新履歴
----------

 * v1.0.0 : 初版
 * v1.1.0 : 
    - オリジナル版と比べて画像のまわりがにじんだように見える問題を修正
    - 低メモリ消費に抑えるための内部での画像分割処理を追加(出力は従来通りです)
 * v1.1.1 : 
    - 特定のサイズの画像(幅または高さが512付近)の出力時にエラーが起きて落ちる問題を修正


 おことわり
------------

本ソフトに関する問い合わせは出来る限りしないようにお願い致します。
不明なことは、出来るだけ検索をし、自己解決するようにして下さい。

もし問い合わせしたとしても、その問い合わせに返信する義務を、本ソフトの作者を含むいかなる主体も負わないこととします。


 謝辞
------
オリジナルのwaifu2x、及びモデルの制作を行い、MITライセンスの下で公開して下さった ultraist 様、
オリジナルのwaifu2xを元に変換用pythonスクリプトを作成して下さった Hector Martin 様(これが無かったら、きっと作ろうと思いませんでした)、
公開までの過程でアドバイスを下さった dandelion 様に、感謝の念を記します。

